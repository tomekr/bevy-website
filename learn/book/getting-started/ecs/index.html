







<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name='viewport' content="width=device-width, initial-scale=1" />
        <meta property="og:title" content="Bevy - ECS" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://bevyengine.org&#x2F;&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;ecs&#x2F;" />
        <meta property="og:image" content="https://bevyengine.org/assets/bevy_logo_fill.png" />
        <meta property="og:description" content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" />
        <link rel="shortcut icon" type="image/png" href="/assets/favicon.png">
        <link rel="stylesheet" href="/site.css" />
        <link href="/atom.xml" rel="alternate" type="application/atom+xml" />
        <title>Bevy - ECS</title>
        
<script src="/optional-helpers.js"></script>

    </head>

    <body>
        <div class="headerbar-container">
            <nav class="headerbar container">
                <a href="/" class="header-logo">
                    <img src="/assets/bevy_logo_dark.svg" class="logo" alt="bevy logo" />
                </a>
                
                    <label class="toggle-nav-mobile" for=show-book-nav>
                        <svg alt="nav bars" width="24" height="24">
                            <g fill="none" stroke="#ececec" stroke-width="2">
                                <path d="m4 6h16" />
                                <path d="m4 11h16" />
                                <path d="m4 16h16" />
                            </g>
                        </svg>
                    </label>
                
                <div class="header-item header-message">
                    
                        The Book
                    
                </div>
                <div class="header-item header-push"></div>
                



    


<a href="&#x2F;" class="header-item" >
    Features
</a>

                



    


<a href="&#x2F;learn" class="header-item header-item-active"  >
    Learn
</a>

                



    


<a href="&#x2F;news" class="header-item" >
    News
</a>

                



    


<a href="&#x2F;community" class="header-item" >
    Community
</a>

                <a class="header-item header-button header-button-donate" href="https://github.com/sponsors/cart">Donate <img src="/assets/heart.svg" class="header-button-donate-heart" alt="heart icon"/></a>
                <a class="header-item header-button" href="/learn/book/getting-started/">Get Started</a>
            </nav>
        </div>
        <section class="section">
            <div class="container">
                
<div class="book-page">
    <input type="checkbox" style="display: none" id="show-book-nav" />
    <nav class="book-nav" role="navigation">
        
        
        <ul class="book-nav-sections-container book-nav-sections">
            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;introduction&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">1.</strong>
        introduction
    </a>
    
</li>

            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.</strong>
        getting started
    </a>
    
    <ul class="book-nav-sections book-nav-sections-indented">
        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;setup&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.1.</strong>
        setup
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;apps&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.2.</strong>
        apps
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;ecs&#x2F;" class="book-nav-section-title-active book-nav-section-title" >
        <strong class="book-nav-section-number">2.3.</strong>
        ecs
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;plugins&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.4.</strong>
        plugins
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;resources&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.5.</strong>
        resources
    </a>
    
</li>

        
    </ul>
    
</li>

            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;next-steps&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">3.</strong>
        next steps
    </a>
    
</li>

            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;contributing&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.</strong>
        contributing
    </a>
    
    <ul class="book-nav-sections book-nav-sections-indented">
        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;contributing&#x2F;code&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.1.</strong>
        code
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;contributing&#x2F;docs&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.2.</strong>
        docs
    </a>
    
</li>

        
    </ul>
    
</li>

            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;troubleshooting&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">5.</strong>
        troubleshooting
    </a>
    
</li>

            
            

<li class="book-nav-section">
    <a href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;faq&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">6.</strong>
        faq
    </a>
    
</li>

            
        </ul>
        
    </nav>
    <div class="book-content">
        

        
        

        
        
            
            

            
        
            
            

            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
        
            
            

            
        
            
            

            
                
                
                
            
                
                
                
            
        
            
            

            
        
            
            

            
        

        
            
            

            

            

        
            
            

            

            

        
            
            

            

            

        
            
            

            

            

        
            
            

            
             
             
                <a id="book-pager-bar-previous" href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;apps&#x2F;" class="book-pager-bar book-pager-bar-previous">
                    <div class="book-pager-bar-icon book-pager-bar-icon-previous">
                        <img src="/assets/pager_previous.svg" class="book-pager-image book-pager-image-left" />
                    </div>
                </a>
             
            

            

        
            
            
                <a id="book-pager-bar-next" href="https:&#x2F;&#x2F;bevyengine.org&#x2F;learn&#x2F;book&#x2F;getting-started&#x2F;plugins&#x2F;" class="book-pager-bar book-pager-bar-next">
                    <div class="book-pager-bar-icon book-pager-bar-icon-next">
                    <img src="/assets/pager_next.svg" class="book-pager-image book-pager-image-right" />
                    </div>
                </a>
                

        <h1>
            
                ECS
            
            
        </h1>
        <div class="media-content"><p>All app logic in Bevy uses the Entity Component System paradigm, which is often shortened to ECS. ECS is a software pattern that involves breaking your program up into <strong>Entities</strong>, <strong>Components</strong>, and <strong>Systems</strong>. <strong>Entities</strong> are unique &quot;things&quot; that are assigned groups of <strong>Components</strong>, which are then processed using <strong>Systems</strong>.</p>
<p>For example, one entity might have a <code>Position</code> and <code>Velocity</code> component, whereas another entity might have a <code>Position</code> and <code>UI</code> component. Systems are logic that runs on a specific set of component types. You might have a <code>movement</code> system that runs on all entities with a <code>Position</code> and <code>Velocity</code> component.</p>
<p>The ECS pattern encourages clean, decoupled designs by forcing you to break up your app data and logic into its core components. It also helps make your code faster by optimizing memory access patterns and making parallelism easier.</p>
<h2 id="bevy-ecs">Bevy ECS</h2>
<p>Bevy ECS is Bevy's implementation of the ECS pattern. Unlike other Rust ECS implementations, which often require complex lifetimes, traits, builder patterns, or macros, Bevy ECS uses normal Rust datatypes for all of these concepts:</p>
<ul>
<li><strong>Components</strong>: normal Rust structs<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">struct </span><span style="color:#cccece;">Position </span><span style="color:#5fb3b3;">{ </span><span style="color:#cccece;">x</span><span style="color:#5fb3b3;">: </span><span style="color:#c594c5;">f32</span><span style="color:#cccece;">, y</span><span style="color:#5fb3b3;">: </span><span style="color:#c594c5;">f32 </span><span style="color:#5fb3b3;">}
</span></code></pre></li>
<li><strong>Systems</strong>: normal Rust functions<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">print_position_system</span><span style="color:#5fb3b3;">(</span><span style="color:#f99157;">query</span><span style="color:#5fb3b3;">: </span><span style="color:#cccece;">Query</span><span style="color:#5fb3b3;">&lt;&amp;</span><span style="color:#cccece;">Transform</span><span style="color:#5fb3b3;">&gt;) {
</span><span style="color:#cccece;">    </span><span style="color:#c594c5;">for</span><span style="color:#cccece;"> transform </span><span style="color:#5fb3b3;">in</span><span style="color:#cccece;"> query</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">iter</span><span style="color:#5fb3b3;">() {
</span><span style="color:#cccece;">        println!</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">position: {:?}</span><span style="color:#5fb3b3;">&quot;,</span><span style="color:#cccece;"> transform</span><span style="color:#5fb3b3;">.</span><span style="color:#cccece;">translation</span><span style="color:#5fb3b3;">);
</span><span style="color:#cccece;">    </span><span style="color:#5fb3b3;">}
</span><span style="color:#5fb3b3;">}
</span></code></pre></li>
<li><strong>Entities</strong>: a simple type containing a unique integer<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">struct </span><span style="color:#cccece;">Entity</span><span style="color:#5fb3b3;">(</span><span style="color:#c594c5;">u64</span><span style="color:#5fb3b3;">);
</span></code></pre></li>
</ul>
<p>Now let's see how this works in practice!</p>
<h2 id="your-first-system">Your First System</h2>
<p>Paste the following function into your <code>main.rs</code> file:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">hello_world</span><span style="color:#5fb3b3;">() {
    </span><span style="color:#cccece;">println!</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">hello world!</span><span style="color:#5fb3b3;">&quot;);
}
</span></code></pre>
<p>This will be our first system. The only remaining step is to add it to our App!</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
        .</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
}
</span></code></pre>
<p>Note the <code>hello_world.system()</code> function call. This is a &quot;trait extension method&quot; that converts the <code>hello_world</code> function into the <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/trait.System.html"><code>System</code>
</a> type.</p>
<p>The <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/trait.IntoQuerySystem.html#method.add_system"><code>add_system()</code>
</a> function adds the system to your App's <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/struct.Schedule.html"><code>Schedule</code>
</a>, but we'll cover that more later.</p>
<p>Now run your App again using <code>cargo run</code>. You should see <code>hello world!</code> printed once in your terminal.</p>
<h2 id="your-first-components">Your First Components</h2>
<p>Greeting the whole world is great, but what if we want to greet specific people? In ECS, you would generally model people as entities with a set of components that define them. Let's start simple with a <code>Person</code> component.</p>
<p>Add this struct to <code>main.rs</code>:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">struct </span><span style="color:#cccece;">Person</span><span style="color:#5fb3b3;">;
</span></code></pre>
<p>But what if we want our people to have a name? In a more traditional design, we might just tack on a <code>name: String</code> field to <code>Person</code>. But other entities might have names too! For example, dogs should probably also have a name. It often makes sense to break datatypes up in to small pieces to encourage code reuse. So let's make <code>Name</code> its own component:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">struct </span><span style="color:#cccece;">Name</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">String</span><span style="color:#5fb3b3;">);
</span></code></pre>
<p>We can then add <code>People</code> to our <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/struct.World.html"><code>World</code>
</a> using a &quot;startup system&quot;. Startup systems are just like normal systems, but they run exactly once, before all other systems, right when our app starts. Let's use <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/struct.Commands.html"><code>Commands</code>
</a> to spawn some entities into our <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/struct.World.html"><code>World</code>
</a>:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">add_people</span><span style="color:#5fb3b3;">(</span><span style="color:#f99157;">commands</span><span style="color:#5fb3b3;">: &amp;</span><span style="color:#c594c5;">mut</span><span style="color:#cccece;"> Commands</span><span style="color:#5fb3b3;">) {
</span><span style="color:#cccece;">    commands
        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">spawn</span><span style="color:#5fb3b3;">((</span><span style="color:#cccece;">Person</span><span style="color:#5fb3b3;">,</span><span style="color:#cccece;"> Name</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">Elaina Proctor</span><span style="color:#5fb3b3;">&quot;.</span><span style="color:#6699cc;">to_string</span><span style="color:#5fb3b3;">())))
        .</span><span style="color:#6699cc;">spawn</span><span style="color:#5fb3b3;">((</span><span style="color:#cccece;">Person</span><span style="color:#5fb3b3;">,</span><span style="color:#cccece;"> Name</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">Renzo Hume</span><span style="color:#5fb3b3;">&quot;.</span><span style="color:#6699cc;">to_string</span><span style="color:#5fb3b3;">())))
        .</span><span style="color:#6699cc;">spawn</span><span style="color:#5fb3b3;">((</span><span style="color:#cccece;">Person</span><span style="color:#5fb3b3;">,</span><span style="color:#cccece;"> Name</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">Zayna Nieves</span><span style="color:#5fb3b3;">&quot;.</span><span style="color:#6699cc;">to_string</span><span style="color:#5fb3b3;">())));
}
</span></code></pre>
<p>Now register the startup system like this:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
        .</span><span style="color:#6699cc;">add_startup_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">add_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
}
</span></code></pre>
<p>We could run this App now and the <code>add_people</code> system would run first, followed by <code>hello_world</code>. But our new people don't have anything to do yet! Let's make a system that properly greets the new citizens of our <a href="https:&#x2F;&#x2F;docs.rs/bevy_ecs&#x2F;std&#x2F;bevy_ecs/struct.World.html"><code>World</code>
</a>:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">greet_people</span><span style="color:#5fb3b3;">(</span><span style="color:#f99157;">query</span><span style="color:#5fb3b3;">: </span><span style="color:#cccece;">Query</span><span style="color:#5fb3b3;">&lt;&amp;</span><span style="color:#cccece;">Name, With</span><span style="color:#5fb3b3;">&lt;</span><span style="color:#cccece;">Person</span><span style="color:#5fb3b3;">&gt;&gt;) {
    </span><span style="color:#c594c5;">for</span><span style="color:#cccece;"> name </span><span style="color:#5fb3b3;">in</span><span style="color:#cccece;"> query</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">iter</span><span style="color:#5fb3b3;">() {
        </span><span style="color:#cccece;">println!</span><span style="color:#5fb3b3;">(&quot;</span><span style="color:#99c794;">hello {}!</span><span style="color:#5fb3b3;">&quot;,</span><span style="color:#cccece;"> name</span><span style="color:#5fb3b3;">.</span><span style="color:#f99157;">0</span><span style="color:#5fb3b3;">);
    }
}
</span></code></pre>
<p>The parameters we pass in to a &quot;system function&quot; define what data the system runs on. In this case, <code>greet_people</code> will run on all entities with the <code>Person</code> and <code>Name</code> component.</p>
<p>You can interpret the Query above as: &quot;iterate over every Name component for entities that also have a Person component&quot;</p>
<p>Now we just register the system in our App:</p>
<pre style="background-color:#2b2c2f;">
<code class="language-rs" data-lang="rs"><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
        .</span><span style="color:#6699cc;">add_startup_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">add_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">greet_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
        .</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
}
</span></code></pre>
<p>Running our app will result in the following output:</p>
<pre style="background-color:#2b2c2f;">
<code><span style="color:#cccece;">hello world!
hello Elaina Proctor!
hello Renzo Hume!
hello Zayna Nieves!
</span></code></pre>
<p>Marvelous!</p>
<p><strong>Quick Note</strong>: &quot;hello world!&quot; might show up in a different order than it does above. This is because systems run in parallel by default when they have no shared dependencies.</p>
</div>
        <div class="book-pagers" />
    </div>
</div>


            </div>
        </section>
    </body>
</html>
